-- ZENNIX HACK | ФУЛЛ ВЕРСИЯ 2025 | БЕЗ ПРЕДИКТА | ВСЁ ВКЛЮЧЕНО СРАЗУ
-- Aimlock — прям в голову (0 предикта) | Полный ESP | Без библиотек | Без ошибок

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UIS = game:GetService("UserInputService")
local Camera = workspace.CurrentCamera
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()

-- ====================== AIMLOCK БЕЗ ПРЕДИКТА (ПРЯМО В ГОЛОВУ) ======================
local AimlockEnabled = true
local HoldingRMB = false

local function GetClosestToCursor()
    local closest = nil
    local shortestDistance = math.huge
    
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("Head") and player.Character:FindFirstChild("Humanoid") and player.Character.Humanoid.Health > 0 then
            local head = player.Character.Head
            local screenPos, onScreen = Camera:WorldToViewportPoint(head.Position)
            if onScreen then
                local distance = (Vector2.new(Mouse.X, Mouse.Y) - Vector2.new(screenPos.X, screenPos.Y)).Magnitude
                if distance < shortestDistance then
                    shortestDistance = distance
                    closest = head
                end
            end
        end
    end
    return closest
end

UIS.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton2 then
        HoldingRMB = true
    end
end)

UIS.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton2 then
        HoldingRMB = false
    end
end)

RunService.Heartbeat:Connect(function()
    if AimlockEnabled and HoldingRMB then
        local target = GetClosestToCursor()
        if target then
            Camera.CFrame = CFrame.new(Camera.CFrame.Position, target.Position) -- 0 ПРЕДИКТА, ПРЯМО В ГОЛОВУ
        end
    end
end)

-- ====================== ESP (Corner + Skeleton + HP + Name + Distance + Tracer) ======================
local ESP = {
    Box = true,
    Tracer = true,
    Name = true,
    Distance = true,
    Health = true,
    Skeleton = true,
    Color = Color3.fromRGB(255, 0, 130)
}

local ESPTable = {}

local function NewDrawing(type)
    local obj = Drawing.new(type)
    if type == "Line" then
        obj.Thickness = 2
        obj.Color = ESP.Color
    elseif type == "Text" then
        obj.Size = 14
        obj.Center = true
        obj.Outline = true
        obj.Font = 2
        obj.Color = ESP.Color
    elseif type == "Square" then
        obj.Filled = true
        obj.Thickness = 1
    end
    obj.Visible = false
    return obj
end

local function AddPlayer(plr)
    if plr == LocalPlayer then return end
    ESPTable[plr] = {
        BoxTL = NewDrawing("Line"),
        BoxTR = NewDrawing("Line"),
        BoxBL = NewDrawing("Line"),
        BoxBR = NewDrawing("Line"),
        Tracer = NewDrawing("Line"),
        Name = NewDrawing("Text"),
        Distance = NewDrawing("Text"),
        HealthBG = NewDrawing("Square"),
        HealthFG = NewDrawing("Square"),
        Skeleton = {}
    }
    for i = 1, 14 do ESPTable[plr].Skeleton[i] = NewDrawing("Line") end
end

for _, plr in pairs(Players:GetPlayers()) do AddPlayer(plr) end
Players.PlayerAdded:Connect(AddPlayer)
Players.PlayerRemoving:Connect(function(plr) if ESPTable[plr] then ESPTable[plr] = nil end end)

RunService.RenderStepped:Connect(function()
    for plr, draw in pairs(ESPTable) do
        if not plr.Character or not plr.Character:FindFirstChild("HumanoidRootPart") or not plr.Character:FindFirstChild("Head") or plr.Character.Humanoid.Health <= 0 then
            for _, v in pairs(draw) do
                if typeof(v) == "Instance" then v.Visible = false
                elseif typeof(v) == "table" then for _, line in pairs(v) do line.Visible = false end end
            end
            continue
        end

        local root = plr.Character.HumanoidRootPart
        local head = plr.Character.Head
        local hum = plr.Character.Humanoid
        local rootPos, onScreen = Camera:WorldToViewportPoint(root.Position)
        local headPos = Camera:WorldToViewportPoint(head.Position + Vector3.new(0, 0.5, 0))
        local legPos = Camera:WorldToViewportPoint(root.Position - Vector3.new(0, 3.5, 0))

        if onScreen then
            local height = math.abs(headPos.Y - legPos.Y)
            local width = height * 0.5
            local corner = 15

            local tl = Vector2.new(rootPos.X - width/2, rootPos.Y - height/2)
            local tr = Vector2.new(rootPos.X + width/2, rootPos.Y - height/2)
            local bl = Vector2.new(rootPos.X - width/2, rootPos.Y + height/2)
            local br = Vector2.new(rootPos.X + width/2, rootPos.Y + height/2)

            -- Corner Boxes
            if ESP.Box then
                draw.BoxTL.From = tl draw.BoxTL.To = tl + Vector2.new(corner, 0) draw.BoxTL.Visible = true
                draw.BoxTR.From = tr draw.BoxTR.To = tr + Vector2.new(-corner, 0) draw.BoxTR.Visible = true
                draw.BoxBL.From = bl draw.BoxBL.To = bl + Vector2.new(corner, 0) draw.BoxBL.Visible = true
                draw.BoxBR.From = br draw.BoxBR.To = br + Vector2.new(-corner, 0) draw.BoxBR.Visible = true
            else
                draw.BoxTL.Visible = false draw.BoxTR.Visible = false draw.BoxBL.Visible = false draw.BoxBR.Visible = false
            end

            -- Tracer
            if ESP.Tracer then
                draw.Tracer.From = Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y)
                draw.Tracer.To = Vector2.new(rootPos.X, bl.Y)
                draw.Tracer.Visible = true
            else
                draw.Tracer.Visible = false
            end

            -- Name & Distance
            local dist = math.floor((LocalPlayer.Character.HumanoidRootPart.Position - root.Position).Magnitude)
            if ESP.Name then draw.Name.Text = plr.DisplayName draw.Name.Position = Vector2.new(rootPos.X, tl.Y - 20) draw.Name.Visible = true end
            if ESP.Distance then draw.Distance.Text = dist.."m" draw.Distance.Position = Vector2.new(rootPos.X, tl.Y - 5) draw.Distance.Visible = true end

            -- Health Bar
            if ESP.Health then
                local health = hum.Health / hum.MaxHealth
                draw.HealthBG.Position = Vector2.new(tl.X - 8, tl.Y)
                draw.HealthBG.Size = Vector2.new(4, height)
                draw.HealthBG.Color = Color3.new(0,0,0)
                draw.HealthBG.Transparency = 0.5
                draw.HealthBG.Visible = true

                draw.HealthFG.Position = Vector2.new(tl.X - 7, tl.Y + height * (1 - health))
                draw.HealthFG.Size = Vector2.new(2, height * health)
                draw.HealthFG.Color = Color3.fromHSV(health/3, 1, 1)
                draw.HealthFG.Visible = true
            end

            -- Skeleton
            if ESP.Skeleton then
                local bones = {
                    {"Head","UpperTorso"},{"UpperTorso","LowerTorso"},
                    {"UpperTorso","LeftUpperArm"},{"LeftUpperArm","LeftLowerArm"},{"LeftLowerArm","LeftHand"},
                    {"UpperTorso","RightUpperArm"},{"RightUpperArm","RightLowerArm"},{"RightLowerArm","RightHand"},
                    {"LowerTorso","LeftUpperLeg"},{"LeftUpperLeg","LeftLowerLeg"},{"LeftLowerLeg","LeftFoot"},
                    {"LowerTorso","RightUpperLeg"},{"RightUpperLeg","RightLowerLeg"},{"RightLowerLeg","RightFoot"}
                }
                for i, bone in ipairs(bones) do
                    local p1 = plr.Character:FindFirstChild(bone[1])
                    local p2 = plr.Character:FindFirstChild(bone[2])
                    if p1 and p2 then
                        local s1 = Camera:WorldToViewportPoint(p1.Position)
                        local s2 = Camera:WorldToViewportPoint(p2.Position)
                        if s1.Z > 0 and s2.Z > 0 then
                            draw.Skeleton[i].From = Vector2.new(s1.X, s1.Y)
                            draw.Skeleton[i].To = Vector2.new(s2.X, s2.Y)
                            draw.Skeleton[i].Visible = true
                        end
                    end
                end
            end
        else
            for _, v in pairs(draw) do
                if typeof(v) == "Instance" then v.Visible = false
                elseif typeof(v) == "table" then for _, l in pairs(v) do l.Visible = false end end
            end
        end
    end
end)

-- ====================== КРАСИВАЯ ЗАГРУЗКА ======================
local Blur = Instance.new("BlurEffect", game.Lighting)
for i = 0, 24, 2 do Blur.Size = i task.wait(0.03) end
task.wait(1.2)
for i = 24, 0, -2 do Blur.Size = i task.wait(0.03) end
Blur:Destroy()

game.StarterGui:SetCore("SendNotification", {
    Title = "Zennix HACK";
    Text = "Загружено успешно! Aimlock — держи ПКМ | ESP включён";
    Duration = 6;
})
